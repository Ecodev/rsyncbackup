<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>10.&nbsp;Conditional shell code</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.0"><link rel="start" href="index.html" title="rsyncbackup: User's Manual"><link rel="up" href="index.html" title="rsyncbackup: User's Manual"><link rel="prev" href="ar01s09.html" title="9.&nbsp;Backup to remote destinations"><link rel="next" href="ar01s11.html" title="11.&nbsp;Incremental backup"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.&nbsp;Conditional shell code</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s09.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ar01s11.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conditional_shell_code"></a>10.&nbsp;Conditional shell code</h2></div></div></div><p>Here are some examples of how to use the conditional shell code field. Remember that for a backup to start both the source and destination conditional shell code must return true.</p><p><span><strong class="command">true</strong></span>; Disable the conditional shell code by entering true. Do <span class="emphasis"><em>not</em></span> leave the field empty, but enter true if you have no conditions.</p><p><span><strong class="command">false</strong></span>; This disables backup. This could be applied to a backup of a source to all destinations or all backups directed to a specific destination.</p><p><span><strong class="command">test -d /Users/andrs/Documents/myfolder</strong></span>; This means only do the backup if <code class="filename">/Users/andrs/Documents/myfolder</code> exists and is a folder.</p><p><span><strong class="command">traceroute -m 2 192.168.1.22</strong></span>; This means that backup will only execute if the ip-address 192.168.1.22 is minumum 2 hops away and the computer is on. If you backup from your laptop, this will tell the backupscript to only backup to the computer at your home LAN when you are home.</p><p><span><strong class="command">isrunning MacSoup.app</strong></span>; This means that rsyncbackup will only run if a process named MacSoup.app is currently running. <code class="literal">isrunning</code> is a tool provided with rsyncbackup and has to be installed into path to work.</p><p><span><strong class="command">isnotrunning Safari.app</strong></span>; This means that rsyncbackup will only run if a process named Safari.app is currently <span class="emphasis"><em>not</em></span> running. <code class="literal">isnotrunning</code> is a tool provided with rsyncbackup and has to be installed into path to work.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Check your <code class="literal">PATH</code></h3><p>When running <span class="application">rsyncbackup</span> from cron, be sure that the conditional shell code commands are in you enviroment PATH. The PATH variable in a crontab is not neccessarily the same as in you login shell. To be sure things are correct, use full paths in the conditional shell code field.</p><p>If you enter a command which is not available from the PATH, the conditional shell code fails, and backup will not proceed. Neigher will this produce error output.</p><p>The <code class="literal">true</code> and <code class="literal">false</code> commands are most often avialable, but such as <span><strong class="command">ping</strong></span> and <span><strong class="command">traceroute</strong></span> might require an additional path.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s09.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ar01s11.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">9.&nbsp;Backup to remote destinations&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;11.&nbsp;Incremental backup</td></tr></table></div></body></html>